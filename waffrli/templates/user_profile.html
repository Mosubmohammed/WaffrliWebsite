{% extends "base.html" %}
{% load static %}
{% block content %}
<link href="{% static 'css/user_profile.css' %}" rel="stylesheet" />
<div class="user-container">
    <nav class="navbar">
        <ul>
            <li><a style="border-bottom: 2px solid #00332ebd;" href="#">My Profile</a></li>
            <li><a href="#">Inbox</a></li>
            <li><a href="#">Saved Items</a></li>
            <li><a href="#">Settings & Options</a></li>
        </ul>
    </nav>
    <div class="profile-container">
        <div class="profile-header">
            <div class="profile-left">
                {% if user.customer and user.customer.image %}
                    <img src="{{ user.customer.image.url }}" alt="User Icon" class="rounded-circle me-2" width="50" height="50" />
                {% else %}
                    <img src="{% static 'images/default-profile.png' %}" alt="Default User" class="rounded-circle me-2" width="50" height="50" />
                {% endif %}
                <div class="profile-info">
                    <h2 class="username">{{ user.username }}</h2>
                    <div class="follow-stats">
                        <a style="color: cornflowerblue;" href="#"><span class="follow-count"><strong>{{ followers|length }}</strong> Followers</span></a>
                        <a style="color: cornflowerblue;" href="#"><span class="follow-count"><strong>{{ following|length }}</strong> Following</span></a>
                    </div>
                    <div class="action-buttons">
                        <button class="btn"><i class="fa-solid fa-envelope"></i></button>
                    </div>
                </div>
            </div>
            <div class="stats-container">
                <div class="stat-box"><i class="fa-solid fa-star"></i><span class="stat-value">{{ reputation_points }}</span><span class="stat-label">Reputation Points</span></div>
                <div class="stat-box"><i class="fa-solid fa-home"></i><span class="stat-value">{{ view_count }}</span><span class="stat-label">Profile Views</span></div>
                <div class="stat-box"><i class="fa-solid fa-eye"></i><span class="stat-value">{{ total_views }}</span><span class="stat-label">Deal Views</span></div>
                <div class="stat-box"><i class="fa-solid fa-tag"></i><span class="stat-value">{{ deal_count }}</span><span class="stat-label">Deals Posted</span></div>
                <div class="stat-box"><i class="fa-solid fa-comment"></i><span class="stat-value">{{ comment_count }}</span><span class="stat-label">Comments Posted</span></div>
                <div class="stat-box"><i class="fa-solid fa-thumbs-up"></i><span class="stat-value">{{ total_likes_received }}</span><span class="stat-label">Votes Given</span></div>
            </div>
        </div>
    </div>
    <hr>
    
<!-- Best Deal Section -->
<div class="best-deal">
    <h3>Best Deal Posted <a href="#" class="see-all">See All Deal Posts</a></h3>
    {% if best_deal %}
        <div class="deal-card">
            <div class="deal-image">
                <img src="{{ best_deal.image.url }}" alt="{{ best_deal.Name }}">
            </div>
            <div class="deal-details">
                <h4 class="deal-title">{{ best_deal.Name }}</h4>
                <p class="deal-store"><strong>Store:</strong> {{ best_deal.store }}</p>
                <p class="deal-likes"><i class="fa-solid fa-thumbs-up"></i> {{ best_deal.likes.count }} Likes</p>
                <p class="deal-views"><i class="fa-solid fa-eye"></i> {{ best_deal.views }} Views</p>
                <p class="deal-comments"><i class="fa-solid fa-comment"></i> {{ best_deal.comment_count }} Comments</p>
                <a href="{{ best_deal.Dealurl }}" target="_blank" class="btn-deal">View Deal</a>
            </div>
        </div>
    {% else %}
        <p class="no-deal">No deals posted yet.</p>
    {% endif %}
</div>


    
    <div class="Asidebar">
        <a href="#" class="active">Activity</a>
        <a href="#">Contributions</a>
        <a href="#">Frontpage</a>
        <a href="#">Deals</a>
        <a href="#">Coupons</a>
        <a href="#">Freebies</a>
        <a href="#">Contests</a>
        <a href="#">Posts</a>
        <a href="#">Threads</a>
        <h3>Reputation</h3>
    </div>
    
    <div class="New-Activity-container">
        <div class="header">
            <h2>Activity</h2>
            <div class="tabs">
                <a href="#" class="tab active">All Activity</a>
                <a href="#" class="tab">Reputation Points</a>
                <a href="#" class="tab">Replies</a>
                <a href="#" class="tab">Votes</a>
                <a href="#" class="tab">New Threads</a>
            </div>
        </div>
        <div class="activity-item">
            <div>
                <p class="note">It looks like there's no activity here yet! <br>Start exploring, posting deals, or engaging with others to bring your profile to life.</p>
            </div>
        </div>
    </div>
{% endblock %}
